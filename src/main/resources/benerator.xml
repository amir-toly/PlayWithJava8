<?xml version="1.0" encoding="iso-8859-1"?>
<setup xmlns="http://databene.org/benerator/0.8.1"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://databene.org/benerator/0.8.1 http://databene.org/benerator-0.8.1.xsd">

    <import defaults="true"
            domains="person,address" class="org.databene.commons.TimeUtil"
            />

    <bean id="csvConsumer" class="CSVEntityExporter">
        <property name="uri" value="src/main/resources/users2.csv"/>
        <property name="columns"
                  value="title,firstname,lastname,login,password,expireDate,role,street,city,postalCode"/>
    </bean>

    <bean id="dateGenerator" class="DateTimeGenerator">
        <property name='minDate' value='2000-01-01'/>
        <property name='maxDate' value='2020-12-31'/>
        <property name='dateDistribution' value='random'/>
        <property name='minTime' value='08:00:00'/>
        <property name='maxTime' value='17:00:00'/>
        <property name='timeGranularity' value='00:00:01'/>
        <property name='timeDistribution' value='random'/>
    </bean>
    <bean id="firstLetterExtract" class="SubstringExtractor">
        <property name='from' value='0'/>
        <property name='to' value='1'/>
    </bean>
    <bean id="passwordGenerator" class="StringGenerator">
        <property name='unique' value='true'/>
        <property name='minLength' value='10'/>
        <property name='maxLength' value='10'/>
    </bean>


    <generate type="User" pageSize="100000" count="10000" consumer="csvConsumer">
        <variable name="userInformation" generator="PersonGenerator" dataset="FR" locale="fr"/>
        <variable name="address" generator="AddressGenerator" nullQuota="0.1" dataset="FR" locale="FR"/>
        <attribute name="title" type="String" script="userInformation.salutation"/>
        <variable name="personLogin" script="userInformation.givenName+userInformation.familyName"
                  converter="org.databene.commons.converter.UniqueStringConverter"/>
        <attribute name="lastname" type="String" script="userInformation.familyName"/>
        <attribute name="firstname" type="String" script="userInformation.givenName"/>
        <variable name="firstnameFirstLetter" converter="firstLetterExtract"/>
        <attribute name="login" type="String" source="personLogin" unique="true"
                   converter="ToLowerCaseConverter"/>
        <attribute name="password" type="String" generator="passwordGenerator" converter="ToLowerCaseConverter"/>
        <attribute name="expireDate" type="timestamp" generator="dateGenerator"/>
        <attribute name="role" values="'SALES','TRADER','ENGINEER'"/>
        <attribute name="street" type="string" script="address.houseNumber+' '+address.street"/>
        <attribute name="city" type="string" script="address.city"/>
        <attribute name="postalCode" type="string" script="address.postalCode"/>
    </generate>


</setup>